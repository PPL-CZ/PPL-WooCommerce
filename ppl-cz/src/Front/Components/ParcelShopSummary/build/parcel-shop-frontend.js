(()=>{"use strict";const e=window.wp.element,t=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"pplcz/parcel-shop-summary-block","version":"1.0.0","title":"Selection block","category":"woocommerce","parent":["woocommerce/checkout-order-summary-block","woocommerce/cart-order-summary-block"],"attributes":{"lock":{"type":"object","default":{"remove":true,"move":false}}},"textdomain":"checkout-block-example","editorScript":"file:./build/index.js"}'),c=window.wc.blocksCheckout,a=window.wp.data,o=e=>{const t=e.extensions?.pplcz_parcelshop?.["parcel-shop"];return!!t},n=t=>{const{cart:c}=t,a=c.extensions?.pplcz_parcelshop?.["parcel-shop"];return(0,e.createElement)("small",null,(0,e.createElement)("strong",null,"Výdejní místo"),(0,e.createElement)("br",null),(0,e.createElement)("span",null,a.name)," ",(0,e.createElement)("a",{href:"#",onClick:e=>{e.preventDefault(),PplMap((()=>{}),{lat:a?.gps.latitude,lng:a?.gps.longitude})}},"[na mapě]"),(0,e.createElement)("br",null),(0,e.createElement)("span",null,a.street),(0,e.createElement)("br",null),(0,e.createElement)("span",null,a.zipCode," ",a.city),(0,e.createElement)("br",null))},r={metadata:t,component:t=>{const{checkoutExtensionData:c}=t,{cart:r,payment:l}=(0,a.useSelect)((e=>({cart:e("wc/store/cart").getCartData(),payment:e("wc/store/payment").getActivePaymentMethod()}))),s=r?.shippingRates?.[0],p=(()=>{if(s)return(e=>{const t=e?.shipping_rates?.find((e=>e.rate_id.indexOf("pplcz_")>-1&&e.selected)),c=t?.meta_data?.find((e=>"mapEnabled"===e.key));return!!parseInt(c?.value)&&t})(s)})(),m=(e=>{const t=e?.shipping_rates.find((e=>e.rate_id.indexOf("pplcz_")>-1&&e.selected)),c=t?.meta_data?.find((e=>"parcelRequired"===e.key));return!!c&&!!parseInt(c.value)})(s);return(0,e.useEffect)((()=>{if(!s)return;const e="wc-block-components-shipping-address-hide-send-address";p&&m&&o(r)?document.body.className+=" "+e:document.body.className=document.body.className.split(/\s+/g).filter((t=>t!==e)).join(" ")}),[p?.instance_id,m]),s&&p&&m&&o(r)?(0,e.createElement)("div",{className:"wp-block-woocommerce-checkout-order-summary-shipping-block wc-block-components-totals-wrapper"},(0,e.createElement)("div",{className:"wc-block-components-totals-item"},(0,e.createElement)(n,{cart:r}))):null}};(0,c.registerCheckoutBlock)(r),wp.hooks.addAction("experimental__woocommerce_blocks-checkout-render-checkout-form","parcel-shop-summary-block",(()=>{const e=wp.data.select("wc/store/payment").getActivePaymentMethod();window.wc.blocksCheckout.extensionCartUpdate({namespace:"pplcz_refresh_payment",data:{payment_method:e}})})),wp.hooks.addAction("experimental__woocommerce_blocks-checkout-set-active-payment-method","parcel-shop-summary-block",(e=>{window.wc.blocksCheckout.extensionCartUpdate({namespace:"pplcz_refresh_payment",data:{payment_method:e.value||e.paymentMethodSlug}})}))})();