(()=>{"use strict";const e=window.wp.element,t=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"pplcz/parcel-shop-summary-block","version":"1.0.0","title":"Selection block","category":"woocommerce","parent":["woocommerce/checkout-order-summary-block","woocommerce/cart-order-summary-block"],"attributes":{"lock":{"type":"object","default":{"remove":true,"move":false}}},"textdomain":"checkout-block-example","editorScript":"file:./build/index.js"}'),c=window.wc.blocksCheckout,a=window.wp.data,o=e=>e?.shipping_rates?.find((e=>e.rate_id.indexOf("pplcz_")>-1&&e.selected)),n=(e,t)=>o(e)?.meta_data?.find((e=>e.key===t)).value,l=({parcelShop:t})=>t?(0,e.createElement)("small",null,(0,e.createElement)("strong",null,"Výdejní místo"),(0,e.createElement)("br",null),(0,e.createElement)("span",null,t.name)," ",(0,e.createElement)("a",{href:"#",onClick:e=>{e.preventDefault(),PplMap((()=>{}),{lat:t?.gps.latitude,lng:t?.gps.longitude})}},"[na mapě]"),(0,e.createElement)("br",null),(0,e.createElement)("span",null,t.street),(0,e.createElement)("br",null),(0,e.createElement)("span",null,t.zipCode," ",t.city),(0,e.createElement)("br",null)):null,r={metadata:t,component:()=>{const{cart:t,payment:c}=(0,a.useSelect)((e=>({cart:e("wc/store/cart").getCartData(),payment:e("wc/store/payment").getActivePaymentMethod()}))),r=t?.shippingRates?.[0],s=r&&(e=>!!parseInt(n(e,"mapEnabled")))(r)?o(r):void 0,m=(e=>!!parseInt(n(e,"parcelRequired")))(r),p=(e=>e.extensions?.pplcz_parcelshop?.["parcel-shop"])(t);return(0,e.useEffect)((()=>{if(!r)return;const e="wc-block-components-shipping-address-hide-send-address";s&&m&&p?document.body.className+=" "+e:document.body.className=document.body.className.split(/\s+/g).filter((t=>t!==e)).join(" ")}),[s?.rate_id,m]),r&&s&&m&&p?(0,e.createElement)("div",{className:"wp-block-woocommerce-checkout-order-summary-shipping-block wc-block-components-totals-wrapper"},(0,e.createElement)("div",{className:"wc-block-components-totals-item"},(0,e.createElement)(l,{parcelShop:p}))):null}};(0,c.registerCheckoutBlock)(r),wp.hooks.addAction("experimental__woocommerce_blocks-checkout-render-checkout-form","parcel-shop-summary-block",(()=>{const e=wp.data.select("wc/store/payment").getActivePaymentMethod();window.wc.blocksCheckout.extensionCartUpdate({namespace:"pplcz_refresh_payment",data:{payment_method:e}})})),wp.hooks.addAction("experimental__woocommerce_blocks-checkout-set-active-payment-method","parcel-shop-summary-block",(e=>{window.wc.blocksCheckout.extensionCartUpdate({namespace:"pplcz_refresh_payment",data:{payment_method:e.value||e.paymentMethodSlug}})}))})();